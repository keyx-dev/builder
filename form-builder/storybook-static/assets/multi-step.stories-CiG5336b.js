import{F as C,p,j as e,R as L}from"./form-builder-Bdhz444m.js";import{r as A}from"./index-DQLiH3RP.js";import{s as a,a as P}from"./index-B5dxBYsT.js";const{useArgs:R}=__STORYBOOK_MODULE_PREVIEW_API__,F={title:"FormBuilder/MultiStepForm",component:C,argTypes:{value:{control:"object"},document:{control:"object"},liveValidate:{control:"boolean"},renderers:{control:"object"}},render:function(f){const[{value:n,renderers:v},m]=R(),[i,j]=A.useState(0),y=t=>{m({value:t})},N=()=>{j(t=>t+1)},M=()=>{j(t=>t-1)},d=[{title:"Job location",document:p({type:"form",title:"Job location",children:[{type:"text-field",label:"Location",dataPath:".jobLocation.location",validate:{required:!0,type:"string"},description:"city, area..."},{type:"fieldRow",children:[{type:"button",label:"Manchester",dataPath:".jobLocation.suggestions.manchester"},{type:"button",label:"Liverpool",dataPath:".jobLocation.suggestions.liverpool"},{type:"button",label:"Leeds",dataPath:".jobLocation.suggestions.leeds"},{type:"button",label:"London",dataPath:".jobLocation.suggestions.london"},{type:"button",label:"Newcastle",dataPath:".jobLocation.suggestions.newcastle"}]}]})},{title:"Job position",document:p({type:"form",title:"Job position",children:[{type:"text-field",label:"Roles",dataPath:".jobPosition.roles",validate:{required:!0,type:"string"},description:"job title, position"},{type:"radio-group",label:"Suggestions",dataPath:".jobPosition.suggestions",options:[{label:"360 Operator",value:"360_operator",description:"Operate and maintain 360 excavator for construction projects.",hourlyRate:"from £30 per hour"},{label:"Site Manager",value:"site_manager",description:"Manage project plans, budgets, and schedules throughout project lifecycle.",hourlyRate:"from £32 per hour"},{label:"Project Manager",value:"project_manager",description:"Manage construction projects & ensure adherence to plans.",hourlyRate:"from £42 per hour"},{label:"Steel Fixer",value:"steel_fixer",description:"Install steel reinforcement bars in concrete structures.",hourlyRate:"from £22 per hour"}]}]})},{title:"Personal details",document:p({type:"form",title:"Personal details",children:[{type:"text-field",label:"Name",dataPath:".personalDetails.name",validate:{required:!0,type:"string"},description:"e.g. John Smith"},{type:"text-field",label:"Phone",dataPath:".personalDetails.phone",inputType:"tel",validate:{required:!0,type:"string",pattern:"^[0-9]{10,15}$"},description:"e.g. 07991123456"},{type:"file-upload",label:"Certification (optional)",dataPath:".personalDetails.certification"}]})},{title:"Application Received",document:p({type:"form",title:"Application Received",children:[{type:"success-message",label:"We've received your application!",description:"We will process it and reach out to you in a days."}]})}],D=d[i].document,E={...v,form:({node:t,context:{core:l}})=>e.jsxs("fieldset",{className:a.fieldset,children:[e.jsx("legend",{className:a.legend,children:t.data.title}),e.jsx("div",{className:a.fieldList,children:t.children&&t.children.map(s=>e.jsx(L,{node:s,renderers:l.renderers,propInjectors:l.propInjectors},s.id))}),e.jsxs("div",{className:a.buttonContainer,children:[i>0&&i<d.length-1&&e.jsx("button",{type:"button",onClick:M,className:a.button,children:"Back"}),i<d.length-1&&e.jsx("button",{type:"button",onClick:N,className:a.button,children:"Next"}),i===d.length-1&&e.jsx("button",{type:"submit",className:a.placeOrderButton,children:"Submit Application"})]})]}),button:({node:t})=>{const l=()=>{var s;if(t.data.dataPath.includes(".jobLocation.suggestions")){const r=(((s=n==null?void 0:n.jobLocation)==null?void 0:s.location)||"").split(", ").filter(Boolean),c=t.data.label;r.includes(c)||m({value:{...n,jobLocation:{...(n==null?void 0:n.jobLocation)||{},location:[...r,c].join(", ")}}})}else t.data.dataPath.includes(".jobPosition.suggestions")};return e.jsx("button",{type:"button",onClick:l,className:a.button,children:t.data.label})},"radio-group":({node:t,$formField:l})=>{const s=l,r=s.value,c=s.errors.length>0,u=o=>{s.setValue(o.target.value)};return e.jsxs("div",{className:a.radioGroup,children:[e.jsx("label",{children:t.data.label}),t.data.options.map(o=>e.jsxs("label",{className:a.radioOption,children:[e.jsx("input",{type:"radio",name:t.id,value:o.value,checked:r===o.value,onChange:u}),e.jsxs("div",{children:[e.jsx("strong",{children:o.label}),o.description&&e.jsx("p",{children:o.description}),o.hourlyRate&&e.jsx("span",{className:a.hourlyRate,children:o.hourlyRate})]})]},o.value)),t.data.description&&e.jsx("span",{className:a.description,children:t.data.description}),c&&e.jsx("span",{className:a.alert,children:s.errors.join(", ")})]})},"file-upload":({node:t,$formField:l})=>{var u;const s=l,r=s.errors.length>0,c=o=>{o.target.files&&o.target.files.length>0&&s.setValue(o.target.files[0].name)};return e.jsxs("div",{className:`${a.field} ${a.fileUploadField}`,children:[e.jsxs("label",{htmlFor:t.id,children:[t.data.label,((u=t.data.validate)==null?void 0:u.required)&&e.jsx("span",{className:a.requiredStar,children:"*"})]}),e.jsxs("div",{className:a.fileUploadBox,children:[e.jsx("input",{id:t.id,type:"file",onChange:c,className:a.hiddenInput}),e.jsxs("label",{htmlFor:t.id,className:a.fileUploadLabel,children:[e.jsx("div",{className:a.uploadIcon,children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 16V8M12 8L15 11M12 8L9 11",stroke:"#6A38ED",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 15C3 17.8284 3 19.2426 3.87868 20.1213C4.75736 21 6.17157 21 9 21H15C17.8284 21 19.2426 21 20.1213 20.1213C21 19.2426 21 17.8284 21 15",stroke:"#6A38ED",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),"Click to upload or drag and drop"]}),s.value&&e.jsx("span",{className:a.fileName,children:s.value})]}),t.data.description&&e.jsx("span",{className:a.description,children:t.data.description}),r&&e.jsx("span",{className:a.alert,children:s.errors.join(", ")})]})},"success-message":({node:t})=>e.jsxs("div",{className:a.successMessageContainer,children:[e.jsx("div",{className:a.successIcon,children:e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M25 50C25 52.7614 22.7614 55 20 55C17.2386 55 15 52.7614 15 50C15 47.2386 17.2386 45 20 45C22.7614 45 25 47.2386 25 50Z",fill:"#6A38ED"}),e.jsx("path",{d:"M45 50C45 52.7614 42.7614 55 40 55C37.2386 55 35 52.7614 35 50C35 47.2386 37.2386 45 40 45C42.7614 45 45 47.2386 45 50Z",fill:"#6A38ED"}),e.jsx("path",{d:"M55 25C55 27.7614 52.7614 30 50 30C47.2386 30 45 27.7614 45 25C45 22.2386 47.2386 20 50 20C52.7614 20 55 22.2386 55 25Z",fill:"#6A38ED"}),e.jsx("path",{d:"M5 25C5 27.7614 2.76142 30 0 30C-2.76142 30 -5 27.7614 -5 25C-5 22.2386 -2.76142 20 0 20C2.76142 20 5 22.2386 5 25Z",fill:"#6A38ED"}),e.jsx("path",{d:"M30 0C32.7614 0 35 2.23858 35 5C35 7.76142 32.7614 10 30 10C27.2386 10 25 7.76142 25 5C25 2.23858 27.2386 0 30 0Z",fill:"#6A38ED"}),e.jsx("path",{d:"M30 60C32.7614 60 35 62.2386 35 65C35 67.7614 32.7614 70 30 70C27.2386 70 25 67.7614 25 65C25 62.2386 27.2386 60 30 60Z",fill:"#6A38ED"}),e.jsx("path",{d:"M50 10C52.7614 10 55 12.2386 55 15C55 17.7614 52.7614 20 50 20C47.2386 20 45 17.7614 45 15C45 12.2386 47.2386 10 50 10Z",fill:"#6A38ED"}),e.jsx("path",{d:"M10 10C12.7614 10 15 12.2386 15 15C15 17.7614 12.7614 20 10 20C7.23858 20 5 17.7614 5 15C5 12.2386 7.23858 10 10 10Z",fill:"#6A38ED"}),e.jsx("path",{d:"M50 40C52.7614 40 55 42.2386 55 45C55 47.7614 52.7614 50 50 50C47.2386 50 45 47.2386 45 45C45 42.2386 47.2386 40 50 40Z",fill:"#6A38ED"}),e.jsx("path",{d:"M10 40C12.7614 40 15 42.2386 15 45C15 47.7614 12.7614 50 10 50C7.23858 50 5 47.7614 5 45C5 42.2386 7.23858 40 10 40Z",fill:"#6A38ED"}),e.jsx("path",{d:"M30 20C32.7614 20 35 22.2386 35 25C35 27.7614 32.7614 30 30 30C27.2386 30 25 27.7614 25 25C25 22.2386 27.2386 20 30 20Z",fill:"#6A38ED"}),e.jsx("path",{d:"M30 30C32.7614 30 35 32.2386 35 35C35 37.7614 32.7614 40 30 40C27.2386 40 25 37.7614 25 35C25 32.2386 27.2386 30 30 30Z",fill:"#6A38ED"}),e.jsx("path",{d:"M30 40C32.7614 40 35 42.2386 35 45C35 47.7614 32.7614 50 30 50C27.2386 50 25 47.7614 25 45C25 42.2386 27.2386 40 30 40Z",fill:"#6A38ED"}),e.jsx("path",{d:"M30 50C32.7614 50 35 52.2386 35 55C35 57.7614 32.7614 60 30 60C27.2386 60 25 57.7614 25 55C25 52.2386 27.2386 50 30 50Z",fill:"#6A38ED"}),e.jsx("path",{d:"M20 30C22.7614 30 25 32.2386 25 35C25 37.7614 22.7614 40 20 40C17.2386 40 15 37.7614 15 35C15 32.2386 17.2386 30 20 30Z",fill:"#6A38ED"}),e.jsx("path",{d:"M40 30C42.7614 30 45 32.2386 45 35C45 37.7614 42.7614 40 40 40C37.2386 40 35 37.7614 35 35C35 32.2386 37.2386 30 40 30Z",fill:"#6A38ED"}),e.jsx("path",{d:"M20 20C22.7614 20 25 22.2386 25 25C25 27.7614 22.7614 30 20 30C17.2386 30 15 27.7614 15 25C15 22.2386 17.2386 20 20 20Z",fill:"#6A38ED"}),e.jsx("path",{d:"M40 20C42.7614 20 45 22.2386 45 25C45 27.7614 42.7614 30 40 30C37.2386 30 35 27.7614 35 25C35 22.2386 37.2386 20 40 20Z",fill:"#6A38ED"})]})}),e.jsx("h2",{children:t.data.label}),e.jsx("p",{children:t.data.description})]})};return e.jsxs("div",{children:[e.jsx("div",{className:a.multiStepHeader,children:d.map((t,l)=>e.jsxs("div",{className:`${a.step} ${l===i?a.activeStep:""} ${l<i?a.completedStep:""}`,children:[l<i?e.jsx(P,{className:a.completedIcon}):e.jsx("span",{className:a.stepNumber,children:l+1}),e.jsx("span",{className:a.stepTitle,children:t.title})]},l))}),e.jsx(C,{...f,value:n,document:D,renderers:E,onChange:y})]})}},h={args:{value:{jobLocation:{location:""},jobPosition:{roles:"",suggestions:""},personalDetails:{name:"",phone:"",certification:""}},document:p({type:"form",title:"Initial Form"}),renderers:{},liveValidate:!0}};var x,b,g;h.parameters={...h.parameters,docs:{...(x=h.parameters)==null?void 0:x.docs,source:{originalSource:`{
  args: {
    value: {
      jobLocation: {
        location: ""
      },
      jobPosition: {
        roles: "",
        suggestions: ""
      },
      personalDetails: {
        name: "",
        phone: "",
        certification: ""
      }
    },
    document: parse({
      type: "form",
      title: "Initial Form"
    }) as unknown as BuilderNode<LocalFormBuilderNodeData>,
    // Placeholder document
    renderers: {},
    // Will be overridden by multiStepRenderers in render function
    liveValidate: true
  }
}`,...(g=(b=h.parameters)==null?void 0:b.docs)==null?void 0:g.source}}};const _=["MultiStepForm"];export{h as MultiStepForm,_ as __namedExportsOrder,F as default};
